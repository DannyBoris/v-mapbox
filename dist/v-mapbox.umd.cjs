(function(s,_){typeof exports=="object"&&typeof module<"u"?_(exports,require("@deck.gl/layers"),require("@deck.gl/mapbox"),require("vue"),require("maplibre-gl")):typeof define=="function"&&define.amd?define(["exports","@deck.gl/layers","@deck.gl/mapbox","vue","maplibre-gl"],_):(s=typeof globalThis<"u"?globalThis:s||self,_(s.VMapbox={},s.deckGlLayers,s.deckGlMapbox,s.vue,s.maplibreGl))})(this,function(s,_,C,t,y){"use strict";/*!
* v-mapbox v5.1.0
* (c) 2024 Vinayak Kulkarni
* @license MIT
*/function f(e,o){const a=t.inject(e,o);if(!a)throw new Error(`Could not resolve ${e.description}`);return a}const i=Symbol("Map"),O=t.defineComponent({__name:"VControlAttribution",props:{options:{default:void 0},position:{default:"bottom-right"}},setup(e){const o={compact:!1,customAttribution:void 0},a=e,r=t.useSlots();let l=f(i);t.onMounted(()=>{n()});const n=()=>{let d=o;a.options&&(d={...a.options}),r&&r.default?.()&&(d.customAttribution=r.default()[0].children);const p=new y.AttributionControl(d);l.value.addControl(p,a.position)};return(d,p)=>t.renderSlot(d.$slots,"default")}}),E=t.defineComponent({__name:"VControlFullscreen",props:{options:{default:void 0},position:{default:"top-left"}},setup(e){const o={container:void 0},a=e;let r=f(i);t.onMounted(()=>{l()});const l=()=>{const n=new y.FullscreenControl(a.options||o);r.value.addControl(n,a.position)};return()=>{}}}),h=["geolocate","error","outofmaxbounds","trackuserlocationstart","trackuserlocationend"],T=t.defineComponent({__name:"VControlGeolocate",props:{options:{default:void 0},position:{default:"top-left"}},emits:h,setup(e,{emit:o}){const a={fitBoundsOptions:{linear:!1,offset:[0,0],maxZoom:22},positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0},r=e,l=o;let n=f(i);t.onMounted(()=>{d()});const d=()=>{const p=new y.GeolocateControl(r.options||a);n.value.addControl(p,r.position),h.forEach(c=>{p.on(c,()=>{l(c)})})};return()=>{}}}),B=t.defineComponent({__name:"VControlNavigation",props:{options:{default:void 0},position:{default:"top-left"}},setup(e){const o={showCompass:!0,showZoom:!0,visualizePitch:!0},a=e,r=t.inject(i);t.onMounted(()=>{l()});const l=()=>{const n=new y.NavigationControl(a.options||o);r?.value.addControl(n,a.position)};return()=>{}}}),A=t.defineComponent({__name:"VControlScale",props:{options:{default:void 0},position:{default:"bottom-left"}},setup(e){const o={maxWidth:100,unit:"metric"},a=e,r=t.inject(i);t.onMounted(()=>{l()});const l=()=>{const n=new y.ScaleControl(a.options||o);r?.value.addControl(n,a.position)};return()=>{}}}),x=t.defineComponent({name:"VLayerDeckArc",props:{layerId:{type:String,default:"deck.gl-arc-layer",required:!0},data:{type:Object,required:!0},options:{type:Object,required:!0},before:{type:String,default:"",required:!1}},setup(e){let o=f(i),a=t.ref(!1);const r=new C.MapboxLayer({...e.options,id:e.layerId,data:e.data,type:_.ArcLayer});o.value.on("style.load",()=>{const n=()=>{o.value.isStyleLoaded()?a.value=!0:(a.value=!1,setTimeout(n,200))};n()}),t.watch(a,n=>{n&&l()}),t.onMounted(()=>{l()});function l(){o.value.addLayer(r,e.before)}}}),P=t.defineComponent({name:"VLayerDeckGeojson",props:{layerId:{type:String,default:"deck.gl-geojson-layer",required:!0},data:{type:Object,required:!0},options:{type:Object,required:!0},before:{type:String,default:"",required:!1}},setup(e){let o=f(i),a=t.ref(!1);const r=new C.MapboxLayer({...e.options,id:e.layerId,data:e.data,type:_.GeoJsonLayer});o.value.on("style.load",()=>{const n=()=>{o.value.isStyleLoaded()?a.value=!0:(a.value=!1,setTimeout(n,200))};n()}),t.watch(a,n=>{n&&l()}),t.onMounted(()=>{l()});function l(){o.value.addLayer(r,e.before)}}}),z=t.defineComponent({name:"VLayerMapboxCanvas",props:{sourceId:{type:String,default:"maplibre.gl-canvas-source",required:!0},layerId:{type:String,default:"maplibre.gl-canvas-layer",required:!0},source:{type:Object,required:!0},layer:{type:Object,default:()=>({}),required:!0},before:{type:String,default:"",required:!1}},setup(e){let o=f(i),a=t.ref(!1);const r={...e.layer,id:e.layerId,source:e.sourceId},l={type:"geojson",data:e.source};o.value.on("style.load",()=>{const d=()=>{o.value.isStyleLoaded()?a.value=!0:(a.value=!1,setTimeout(d,200))};d()}),t.watch(a,d=>{d&&n()}),t.onMounted(()=>{n()});function n(){o.value.addSource(e.sourceId,l),o.value.addLayer(r,e.before)}}}),b=(e,o)=>{const a=e.__vccOpts||e;for(const[r,l]of o)a[r]=l;return a};function D(e,o,a,r,l,n){return t.openBlock(),t.createElementBlock("div",null,[t.renderSlot(e.$slots,"default")])}const R=b(z,[["render",D]]),U=t.defineComponent({name:"VLayerMapboxGeojson",props:{sourceId:{type:String,default:"maplibre.gl-geojson-source",required:!0},layerId:{type:String,default:"maplibre.gl-geojson-layer",required:!0},source:{type:Object,required:!0},layer:{type:Object,default:()=>({}),required:!0},before:{type:String,default:"",required:!1}},setup(e){let o=f(i),a=t.ref(!1);const r={...e.layer,id:e.layerId,source:e.sourceId};o.value.on("style.load",()=>{const n=()=>{o.value.isStyleLoaded()?a.value=!0:(a.value=!1,setTimeout(n,200))};n()}),t.watch(a,n=>{n&&l()}),t.onMounted(()=>{l()}),t.onBeforeUnmount(()=>{o.value.getLayer(e.layerId)&&(o.value.removeLayer(e.layerId),o.value.removeSource(e.sourceId))});function l(){o.value.addSource(e.sourceId,e.source),o.value.addLayer(r,e.before)}}});function F(e,o,a,r,l,n){return t.openBlock(),t.createElementBlock("div",null,[t.renderSlot(e.$slots,"default")])}const G=b(U,[["render",F]]),N=t.defineComponent({name:"VLayerMapboxImage",props:{sourceId:{type:String,default:"maplibre.gl-image-source",required:!0},layerId:{type:String,default:"maplibre.gl-image-layer",required:!0},source:{type:Object,required:!0},layer:{type:Object,default:()=>({}),required:!0},before:{type:String,default:"",required:!1}},setup(e){let o=f(i),a=t.ref(!1);const r={...e.layer,id:e.layerId,source:e.sourceId};o.value.on("style.load",()=>{const n=()=>{o.value.isStyleLoaded()?a.value=!0:(a.value=!1,setTimeout(n,200))};n()}),t.watch(a,n=>{n&&l()}),t.onMounted(()=>{l()});function l(){o.value.addSource(e.sourceId,e.source),o.value.addLayer(r,e.before)}}});function Z(e,o,a,r,l,n){return t.openBlock(),t.createElementBlock("div",null,[t.renderSlot(e.$slots,"default")])}const H=b(N,[["render",Z]]),J=t.defineComponent({name:"VLayerMapboxRaster",props:{sourceId:{type:String,default:"maplibre.gl-raster-source",required:!0},layerId:{type:String,default:"maplibre.gl-raster-layer",required:!0},source:{type:Object,required:!0},layer:{type:Object,default:()=>({}),required:!0},before:{type:String,default:"",required:!1}},setup(e){let o=f(i),a=t.ref(!1);const r={...e.layer,id:e.layerId,source:e.sourceId},l={type:"geojson",data:e.source};o.value.on("style.load",()=>{const d=()=>{o.value.isStyleLoaded()?a.value=!0:(a.value=!1,setTimeout(d,200))};d()}),t.watch(a,d=>{d&&n()}),t.onMounted(()=>{n()});function n(){o.value.addSource(e.sourceId,l),o.value.addLayer(r,e.before)}}});function K(e,o,a,r,l,n){return t.openBlock(),t.createElementBlock("div",null,[t.renderSlot(e.$slots,"default")])}const W=b(J,[["render",K]]),Q=t.defineComponent({name:"VLayerMapboxVector",props:{sourceId:{type:String,default:"maplibre.gl-vector-source",required:!0},layerId:{type:String,default:"maplibre.gl-vector-layer",required:!0},source:{type:Object,required:!0},layer:{type:Object,default:()=>({}),required:!0},before:{type:String,default:"",required:!1}},setup(e){let o=f(i),a=t.ref(!1);const r={...e.layer,id:e.layerId,source:e.sourceId};o.value.on("style.load",()=>{const n=()=>{o.value.isStyleLoaded()?a.value=!0:(a.value=!1,setTimeout(n,200))};n()}),t.watch(a,n=>{n&&l()}),t.onMounted(()=>{l()});function l(){o.value.addSource(e.sourceId,e.source),o.value.addLayer(r,e.before)}}});function X(e,o,a,r,l,n){return t.openBlock(),t.createElementBlock("div",null,[t.renderSlot(e.$slots,"default")])}const Y=b(Q,[["render",X]]),ee=t.defineComponent({name:"VLayerMapboxVideo",props:{sourceId:{type:String,default:"maplibre.gl-video-source",required:!0},layerId:{type:String,default:"maplibre.gl-video-layer",required:!0},source:{type:Object,required:!0},layer:{type:Object,default:()=>({}),required:!0},before:{type:String,default:"",required:!1}},setup(e){let o=f(i),a=t.ref(!1);const r={...e.layer,id:e.layerId,source:e.sourceId};o.value.on("style.load",()=>{const n=()=>{o.value.isStyleLoaded()?a.value=!0:(a.value=!1,setTimeout(n,200))};n()}),t.watch(a,n=>{n&&l()}),t.onMounted(()=>{l()});function l(){o.value.addSource(e.sourceId,e.source),o.value.addLayer(r,e.before)}}});function te(e,o,a,r,l,n){return t.openBlock(),t.createElementBlock("div",null,[t.renderSlot(e.$slots,"default")])}const oe=b(ee,[["render",te]]),q=["error","load","idle","remove","render","resize","webglcontextlost","webglcontextrestored","dataloading","data","tiledataloading","sourcedataloading","styledataloading","sourcedata","styledata","boxzoomcancel","boxzoomstart","boxzoomend","touchcancel","touchmove","touchend","touchstart","click","contextmenu","dblclick","mousemove","mouseup","mousedown","mouseout","mouseover","movestart","move","moveend","zoomstart","zoom","zoomend","rotatestart","rotate","rotateend","dragstart","drag","dragend","pitchstart","pitch","pitchend","wheel"],V=["dragstart","drag","dragend"],I=["click","mouseenter","mouseleave"],S=["open","close"],ae=["id"],re=t.defineComponent({__name:"VMap",props:{options:{default:{container:"map"}}},emits:["loaded",...q],setup(e,{emit:o}){const a=e,r=o;let l=t.shallowRef({}),n=t.ref(!1),d=t.ref(q);t.onMounted(()=>{l.value=new y.Map(a.options),n.value=!0,t.provide(i,l),p()});const p=()=>{d.value.forEach(c=>{l.value.on(c,g=>{switch(c){case"load":r("loaded",l.value);break;default:r(c,g);break}})})};return(c,g)=>(t.openBlock(),t.createElementBlock("div",{id:`${c.options?.container}`,class:"v-map-container"},[t.renderSlot(c.$slots,"default",{},void 0,!0)],8,ae))}}),j=b(re,[["__scopeId","data-v-75fc2869"]]),ne=t.defineComponent({name:"VPopup",props:{marker:{type:Object,default:()=>({}),required:!1},options:{type:Object,default:()=>({}),required:!0},coordinates:{type:Object,default:()=>({}),required:!0}},emits:["added","removed",...S],setup(e,{emit:o}){let a=f(i),r=new y.Popup(e.options),l=t.ref(!0);const n=t.ref(null);a.value.on("style.load",()=>{const m=()=>{a.value.isStyleLoaded()?l.value=!0:(l.value=!1,setTimeout(m,200))};m()}),t.onMounted(()=>{l.value?(d(),p(),c(),k()):(g(),M())}),t.onBeforeUnmount(()=>{g(),M()});function d(){r.setDOMContent(n.value)}function p(){r.setLngLat(e.coordinates)}function c(){e.marker?e.marker.setPopup(r):r.addTo(a.value),o("added",{popup:r})}function g(){r.remove(),o("removed")}function k(){S.forEach(m=>{r.on(m,()=>{o(m)})})}function M(){S.forEach(m=>{r.off(m,()=>{o(m)})})}return{content:n}}}),le=["id"];function de(e,o,a,r,l,n){return t.openBlock(),t.createElementBlock("section",{id:`popup-${Date.now()}`,ref:"content"},[t.renderSlot(e.$slots,"default")],8,le)}const w=b(ne,[["render",de]]),se=t.defineComponent({name:"VMarker",components:{VPopup:w},props:{coordinates:{type:[Object,Array],default:()=>({}),required:!0},options:{type:Object,default:()=>({}),required:!1},popupOptions:{type:Object,default:()=>({}),required:!1},cursor:{type:String,default:"pointer",required:!1}},emits:["added","update:coordinates","removed",...V,...I],setup(e,{emit:o}){let a=f(i),r=t.ref({}),l=t.ref(!0),n=t.ref(!1),d=t.ref(null);const p=u=>{d.value=u};t.watch(r,u=>{"_map"in u?n.value=!0:n.value=!1}),t.onMounted(()=>{l.value?d.value!==null?(r.value=new y.Marker({element:d.value,...e.options}),c(r.value),k(r.value),g(r.value),m(r.value)):(r.value=new y.Marker(e.options),c(r.value),k(r.value),g(r.value),m(r.value)):M(r.value)}),t.onBeforeUnmount(()=>{M(r.value)}),a.value.on("style.load",()=>{const u=()=>{a.value.isStyleLoaded()?l.value=!0:(l.value=!1,setTimeout(u,200))};u()});function c(u){u.setLngLat(e.coordinates)}function g(u){u.getElement().style.cursor=e.cursor||"default"}function k(u){u.addTo(a.value),o("added",{marker:u})}function M(u){n.value&&(u.remove(),o("removed"))}function m(u){let v;V.forEach($=>{u.on($,L=>{$==="dragend"&&(e.coordinates instanceof Array?v=[L.target._lngLat.lng,L.target._lngLat.lat]:v=L.target._lngLat,o("update:coordinates",v)),o($,L)})}),I.forEach($=>{u.getElement().addEventListener($,L=>{o($,L)})})}return{isMarkerAvailable:n,marker:r,setSlotRef:p}}}),ue=["id"];function ie(e,o,a,r,l,n){const d=t.resolveComponent("v-popup");return t.openBlock(),t.createElementBlock("section",{id:`marker-${Date.now()}`,class:"absolute"},[t.renderSlot(e.$slots,"markers",{setRef:e.setSlotRef}),e.isMarkerAvailable?(t.openBlock(),t.createBlock(d,{key:0,marker:e.marker,options:e.popupOptions,coordinates:e.coordinates},{default:t.withCtx(()=>[t.renderSlot(e.$slots,"default")]),_:3},8,["marker","options","coordinates"])):t.createCommentVNode("",!0)],8,ue)}const ce=b(se,[["render",ie]]);s.VControlAttribution=O,s.VControlFullscreen=E,s.VControlGeolocate=T,s.VControlNavigation=B,s.VControlScale=A,s.VLayerDeckArc=x,s.VLayerDeckGeojson=P,s.VLayerMapboxCanvas=R,s.VLayerMapboxGeojson=G,s.VLayerMapboxImage=H,s.VLayerMapboxRaster=W,s.VLayerMapboxVector=Y,s.VLayerMapboxVideo=oe,s.VMap=j,s.VMarker=ce,s.VPopup=w,s.default=j,Object.defineProperties(s,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=v-mapbox.umd.cjs.map
